---
title: "Go 语言基础之数组"
description: "学习 Go 语言的数组类型，了解固定长度、单一类型、值类型的特性，对比 JavaScript 数组。"
date: "2025-11-25"
seriesOrder: 11
---

# 11. Go 语言基础之数组

## 引言

在 JavaScript 中，数组（Array）是一个非常灵活的数据结构：
1.  **长度可变**：你可以随时 `push` 或 `pop`。
2.  **类型混合**：一个数组里可以同时放数字、字符串和对象。
3.  **引用类型**：赋值或传参时，传递的是引用（地址）。

在 Go 语言中，**数组（Array）**的概念完全不同。它更像 C 语言中的数组：**固定长度**、**单一类型**、**值类型**。

## 1. 数组的定义

数组是同一种数据类型元素的集合。在 Go 中，定义数组时必须指定**长度**和**元素类型**。

### 1.1 声明语法

```go
// var 数组变量名 [元素数量]T
var a [3]int // 定义一个长度为3的int数组
```

**注意**：
1.  数组的长度必须是常量，且必须在定义时指定。
2.  一旦定义，**长度不能修改**。你不能像 JS 那样 `a.push(4)`。
3.  数组会自动初始化为零值。上面的 `a` 会变成 `[0 0 0]`。

### 1.2 初始化方式

```go
// 1. 使用初始化列表
var cityArray = [3]string{"北京", "上海", "深圳"}

// 2. 让编译器推导长度 [...]
var boolArray = [...]bool{true, false, true} // 编译器会自动数出长度为 3

// 3. 指定索引值
// 长度为 5，索引 1 为 10，索引 3 为 30，其余为 0
var langArray = [...]int{1: 10, 3: 30} 
// 结果: [0 10 0 30 0]
```

## 2. 核心特性：长度是类型的一部分

这是 Go 数组最特别的地方。

**`[3]int` 和 `[4]int` 是完全不同的两种数据类型。**

```go
var a [3]int
var b [4]int
// a = b // 编译错误！cannot use b (type [4]int) as type [3]int in assignment
```

这意味着你不能写一个通用的函数来处理不同长度的数组（除非使用切片，下一篇会讲）。

## 3. 核心特性：数组是值类型 (Value Type)

这是与 JavaScript 最大的区别。

-   **JavaScript**: 数组是引用类型。
    ```javascript
    let a = [1, 2, 3];
    let b = a; // b 指向 a 的地址
    b[0] = 100;
    console.log(a[0]); // 输出 100，a 也变了
    ```

-   **Go**: 数组是值类型。赋值和传参会**复制整个数组**。
    ```go
    a := [3]int{1, 2, 3}
    b := a // b 是 a 的完整拷贝（深拷贝）
    b[0] = 100
    fmt.Println(a[0]) // 输出 1，a 没有变！
    ```

**性能警示**：
如果你有一个包含 100 万个元素的数组，将它传递给函数时，会发生一次巨大的内存复制，严重影响性能。因此，在 Go 中，我们很少直接传递大数组，而是传递**数组指针**或**切片**。

## 4. 数组遍历

使用 `for range` 循环遍历数组是最常见的方式。

```go
a := [...]string{"北京", "上海", "深圳"}

// 方法 1: for range
for index, value := range a {
    fmt.Println(index, value)
}

// 方法 2: 普通 for 循环
for i := 0; i < len(a); i++ {
    fmt.Println(i, a[i])
}
```

## 5. 多维数组

Go 支持多维数组，最常见的是二维数组。

```go
// 定义一个 3行 2列 的二维数组
var a [3][2]int
a = [3][2]int{
    {1, 2},
    {3, 4},
    {5, 6},
}

// 遍历二维数组
for _, row := range a {
    for _, col := range row {
        fmt.Printf("%d ", col)
    }
    fmt.Println()
}
```

## 6. 总结

Go 语言的数组虽然在底层非常重要（它是切片的基础），但在实际开发中，我们**很少直接使用数组**。

为什么？
1.  **长度固定**：太不灵活了。
2.  **值类型**：传递大数组时性能差。

为了解决这些问题，Go 引入了**切片 (Slice)**。切片是对数组的抽象，它既灵活（动态扩容）又高效（引用传递）。

在 99% 的场景下，你都会使用切片而不是数组。下一篇文章，我们将深入探讨这个 Go 语言中最重要的数据结构——切片。

---

**上一篇**：[10.Go 语言基础之流程控制](./10.Go%20语言基础之流程控制.md)
**下一篇预告**：[12.Go 语言基础之切片](./12.Go%20语言基础之切片.md)
