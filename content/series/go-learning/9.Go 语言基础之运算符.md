---
title: "Go 语言基础之运算符"
description: "学习 Go 语言的算术、比较、逻辑、位运算符，了解自增自减的使用限制和指针运算符。"
date: "2025-11-25"
seriesOrder: 9
---

# 9. Go 语言基础之运算符

## 引言

Go 语言的运算符大部分与 JavaScript 类似，但也有一些独特的设计，特别是关于自增自减运算符的使用限制，以及指针运算符的引入。

## 1. 算术运算符 (Arithmetic Operators)

常用的 `+`, `-`, `*`, `/`, `%` 与 JavaScript 基本一致。

需要注意的是：
1.  **整数除法**：在 Go 中，两个整数相除，结果依然是整数（向下取整）。
    ```go
    fmt.Println(10 / 3) // 输出 3，而不是 3.3333
    ```
2.  **字符串拼接**：`+` 可以用于拼接字符串。

### 1.1 自增与自减 (Inc/Dec) —— 这是一个坑

在 JavaScript 中，`++` 和 `--` 是表达式，可以放在变量前，也可以放在变量后，甚至可以赋值给其他变量。

```javascript
// JavaScript
let i = 10;
let a = i++; // 合法
let b = ++i; // 合法
```

在 Go 语言中，**`++` 和 `--` 是语句 (Statement)，不是表达式 (Expression)**。

这意味着：
1.  **不能赋值**：`a := i++` 是非法的。
2.  **只能后置**：`++i` 是非法的，只能写 `i++`。

```go
// Go
i := 10
i++ // 正确
// ++i // 编译错误
// j := i++ // 编译错误
```

这种设计的目的是为了消除歧义，提高代码可读性。

## 2. 关系运算符 (Relational Operators)

`==`, `!=`, `>`, `<`, `>=`, `<=`。

**注意**：
-   Go 是强类型语言，**不同类型的变量不能比较**。
    ```go
    var a int = 10
    var b int32 = 10
    // if a == b { ... } // 编译错误！类型不匹配
    ```
-   数组也可以比较（如果数组元素是可比较的），只有当长度和所有元素都相等时，两个数组才相等。

## 3. 逻辑运算符 (Logical Operators)

`&&` (与), `||` (或), `!` (非)。

与 JavaScript 一样，Go 的逻辑运算也支持**短路求值 (Short-circuit evaluation)**。

## 4. 位运算符 (Bitwise Operators)

Go 支持常见的位运算：
-   `&`: 按位与
-   `|`: 按位或
-   `^`: 按位异或
-   `<<`: 左移
-   `>>`: 右移

此外，Go 还有一个特有的运算符：**`&^` (按位清空)**。
`z = x &^ y`：如果 y 的某一位是 1，则 z 的对应位为 0；否则 z 的对应位等于 x 的对应位。

## 5. 赋值运算符 (Assignment Operators)

`=`, `+=`, `-=`, `*=`, `/=`, `%=`, `<<=`, `>>=`, `&=`, `|=`, `^=`。

这些用法与 JavaScript 一致。

## 6. 指针运算符 (Pointer Operators)

这是前端开发者最陌生的部分。虽然我们还没深入讲指针，但先认识两个符号：

-   **`&` (取地址)**：获取变量在内存中的地址。
-   **`*` (解引用)**：获取指针指向的内存地址中的值。

```go
a := 10
p := &a // p 是一个指针，存储了 a 的内存地址
fmt.Println(p) // 输出地址，如 0xc000012088
fmt.Println(*p) // 输出 10 (取出地址里的值)
```

> **前端类比**: 你可以把指针想象成一个对象的引用。`&` 就是获取引用的操作，`*` 就是通过引用去访问原始值。

## 7. 遗憾：没有三元运算符

在 JavaScript 中，我们非常喜欢用三元运算符：
```javascript
// JavaScript
const max = a > b ? a : b;
```

**Go 语言不支持三元运算符**。你必须使用 `if-else`：

```go
// Go
var max int
if a > b {
    max = a
} else {
    max = b
}
```

官方解释是：三元运算符经常被滥用，导致代码可读性变差（比如嵌套的三元运算）。Go 宁愿你多写几行代码，也要保证逻辑清晰。

## 8. 总结

Go 的运算符设计依然遵循"简单明确"的原则：
1.  砍掉了容易产生歧义的 `++i` 和 `a = i++`。
2.  砍掉了容易降低可读性的三元运算符 `? :`。
3.  引入了系统级编程必需的指针运算符 `&` 和 `*`。

下一篇文章，我们将学习 Go 语言的流程控制，你会发现它同样非常精简——只有 `if`, `for`, `switch`，没有 `while`。

---

