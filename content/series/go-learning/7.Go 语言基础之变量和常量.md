---
title: "Go 语言基础之变量和常量"
description: "学习 Go 语言的变量声明方式、零值概念和可见性规则，对比 JavaScript 的 var、let、const。"
date: "2025-11-25"
seriesOrder: 7
---

# 7. Go 语言基础之变量和常量

## 引言

掌握了环境配置和依赖管理后，我们终于要开始写代码了。任何编程语言的学习都始于变量。

对于前端开发者来说，JavaScript 的 `var`, `let`, `const` 已经非常熟悉了。Go 语言在变量声明上有着自己独特的哲学，特别是它的**零值（Zero Value）**概念和**可见性规则**，与 JavaScript 有着本质的区别。

## 1. 变量声明 (Variables)

Go 语言是静态强类型语言，这意味着变量在声明时必须确定类型（或者由编译器推断），且一旦确定就不能改变。

### 1.1 标准声明格式

使用 `var` 关键字，格式为：`var 变量名 类型`。

```go
var age int
var name string
var isStudent bool
```

注意：**类型放在变量名之后**。这与 TypeScript (`var age: number`) 类似，但没有冒号。

### 1.2 类型推导

如果你在声明时同时赋值，Go 编译器可以自动推断出类型，此时可以省略类型。

```go
var age = 18 // 编译器推断 age 为 int
var name = "Tom" // 编译器推断 name 为 string
```

### 1.3 简短变量声明 (Short Variable Declaration)

这是 Go 语言中最常用的写法，也是最像 JavaScript 的写法。使用 `:=` 操作符。

```go
func main() {
    age := 18
    name := "Tom"
    fmt.Println(name, age)
}
```

**注意**：
1.  `:=` 只能在**函数内部**使用。在函数外部（全局变量）必须使用 `var` 关键字。
2.  `:=` 左侧的变量必须是**新声明**的（至少有一个是新的）。

### 1.4 批量声明

如果需要声明多个变量，可以使用括号，这种写法在声明全局变量时非常常见。

```go
var (
    username string
    age      int
    gender   string
)
```

### 1.5 匿名变量 (The Blank Identifier)

Go 语言对未使用的变量非常严格。**如果在函数内部声明了变量却不使用，编译会报错**。

但在某些情况下（比如函数返回多个值，你只需要其中一个），我们需要显式地忽略某个值。这时可以使用下划线 `_`，称为匿名变量。

```go
func getNameAndAge() (string, int) {
    return "Tom", 18
}

func main() {
    // 我只想要名字，不关心年龄
    name, _ := getNameAndAge()
    fmt.Println(name)
}
```

## 2. 零值 (Zero Value) —— 告别 undefined

这是 Go 与 JavaScript 最大的区别之一。

在 JavaScript 中，如果你声明一个变量但不赋值，它的值是 `undefined`。
在 Go 中，**所有变量在声明时都会被自动初始化为该类型的零值**。Go 语言中不存在 "未定义" 的状态。

| 类型 | 零值 |
| :--- | :--- |
| `int`, `float` | `0` |
| `bool` | `false` |
| `string` | `""` (空字符串) |
| 指针, `slice`, `map`, `channel`, `interface` | `nil` |

**代码示例**:
```go
var i int
var s string
fmt.Printf("%d, %q", i, s) // 输出: 0, ""
```

这极大地提高了程序的安全性，你不需要像在 JS 中那样到处判断 `if (x === undefined)`。

## 3. 常量 (Constants)

常量使用 `const` 关键字声明，必须在定义时赋值，且值在运行期间不可改变。

```go
const Pi = 3.14159
const StatusOK = 200
```

### 3.1 iota —— 优雅的枚举

Go 语言没有 `enum` 关键字，但它提供了一个特殊的常量生成器 `iota`，用于创建枚举。

`iota` 在 `const` 关键字出现时被重置为 0，然后在每一个有常量声明的行自动加 1。

```go
const (
    Sunday = iota // 0
    Monday        // 1
    Tuesday       // 2
    Wednesday     // 3
    Thursday      // 4
    Friday        // 5
    Saturday      // 6
)
```

这比 JavaScript 中手动定义对象来实现枚举要优雅得多：
```javascript
// JavaScript
const Days = {
    Sunday: 0,
    Monday: 1,
    // ...
}
```

## 4. 变量可见性 (Visibility) —— 大小写定乾坤

在 JavaScript (ES6模块) 中，我们使用 `export` 关键字来导出变量或函数。

在 Go 语言中，**没有 `public`, `private`, `export` 这些关键字**。它使用**首字母的大小写**来控制可见性（访问权限）。

-   **首字母大写**：**公开的 (Public/Exported)**。可以被其他包（package）访问。
-   **首字母小写**：**私有的 (Private/Unexported)**。只能在当前包内部访问。

**示例**:

```go
package user

// Name 是公开的，其他包可以通过 user.Name 访问
var Name = "Tom"

// age 是私有的，其他包无法访问，只能在 user 包内部使用
var age = 18
```

这种设计极其简洁，一眼就能看出哪些是公开 API，哪些是内部实现。

## 5. 总结

Go 语言的变量系统设计得非常务实：

1.  **静态类型**保证了安全。
2.  **`:=` 简短声明**保证了开发的便捷性。
3.  **零值机制**消灭了 `undefined` 带来的隐患。
4.  **首字母大小写**控制权限，省去了繁琐的关键字。

对于前端开发者来说，最需要适应的是：**变量声明了必须使用**，以及**首字母大写的特殊含义**。

下一篇文章，我们将深入探讨 Go 语言的基本数据类型，特别是它丰富的数字类型（`int8`, `int64`, `uint`...）和独特的字符串处理方式。

---

