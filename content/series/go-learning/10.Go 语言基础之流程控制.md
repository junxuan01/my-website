---
title: "Go 语言基础之流程控制"
description: "掌握 Go 语言的流程控制语句：if、switch、for 循环，了解 Go 精简设计的哲学。"
date: "2025-11-25"
seriesOrder: 10
---

# 10. Go 语言基础之流程控制

## 引言

在 JavaScript 中，我们有 `if`, `switch`, `for`, `while`, `do-while`, `for-in`, `for-of` 等多种流程控制语句。

Go 语言秉承"少即是多"的哲学，极大地精简了流程控制关键字。
-   没有 `while`，没有 `do-while`。
-   `if` 和 `switch` 更加强大。
-   `for` 统治一切循环。

## 1. if else (条件判断)

### 1.1 基本语法

Go 的 `if` 语法与 JavaScript 非常像，唯一的区别是：**条件表达式不需要加括号 `()`**，但**大括号 `{}` 是必须的**（即使只有一行代码）。

```go
// Go
if age > 18 {
    fmt.Println("Adult")
} else {
    fmt.Println("Minor")
}
```

### 1.2 特殊写法：带初始化的 if

这是 Go 语言的一个特色功能。你可以在 `if` 关键字后面添加一个执行语句，用分号 `;` 隔开，然后再写条件表达式。

```go
// if 初始化语句; 条件表达式 { ... }
if score := calculateScore(); score > 60 {
    fmt.Println("Passed:", score)
}
// 注意：变量 score 的作用域仅限于 if 代码块内部（包括 else）
// fmt.Println(score) // 编译错误：undefined: score
```

这种写法在错误处理中非常常见：

```go
if err := doSomething(); err != nil {
    log.Fatal(err)
}
```

## 2. for (循环) —— 一个打十个

Go 语言只有 `for` 一个循环关键字，但它能实现 `while` 和 `do-while` 的所有功能。

### 2.1 标准写法 (类似于 C/JS)

```go
for i := 0; i < 5; i++ {
    fmt.Println(i)
}
```

### 2.2 模拟 while

省略初始化和后置语句，就变成了 `while`。

```go
i := 0
for i < 5 { // 相当于 JS 的 while (i < 5)
    fmt.Println(i)
    i++
}
```

### 2.3 无限循环

省略所有条件，就是死循环（常用于服务器的主循环）。

```go
for {
    // 相当于 JS 的 while (true)
    doWork()
}
```

### 2.4 for range (键值循环)

这是 Go 中最常用的遍历方式，类似于 JS 的 `for...of` 或 `forEach`。它可以遍历数组、切片、字符串、Map 和 Channel。

```go
s := []string{"a", "b", "c"}

// 返回索引和值
for i, v := range s {
    fmt.Printf("index: %d, value: %s\n", i, v)
}

// 如果只需要值，使用 _ 忽略索引
for _, v := range s {
    fmt.Println(v)
}
```

## 3. switch (分支)

Go 的 `switch` 比 JavaScript 的更灵活、更安全。

### 3.1 自动 break

在 JavaScript 中，写 `switch` 最容易犯的错就是忘了写 `break`，导致代码"穿透"（Fallthrough）执行。

Go 语言**默认自带 break**。匹配到一个 case 后，执行完自动结束 switch，不会向下穿透。

```go
day := "Monday"
switch day {
case "Monday":
    fmt.Println("Work")
    // 不需要 break，自动结束
case "Friday":
    fmt.Println("Party")
default:
    fmt.Println("Sleep")
}
```

### 3.2 fallthrough (显式穿透)

如果你确实需要穿透效果，必须显式使用 `fallthrough` 关键字。

```go
switch num {
case 1:
    fmt.Println("1")
    fallthrough // 强制执行下一个 case
case 2:
    fmt.Println("2")
}
```

### 3.3 一个 case 多个值

```go
switch day {
case "Saturday", "Sunday": // 逗号分隔
    fmt.Println("Weekend")
default:
    fmt.Println("Workday")
}
```

### 3.4 代替 if-else if

`switch` 后面可以不跟任何表达式，此时它相当于一连串的 `if-else`，但代码更清晰。

```go
score := 85
switch { // 这里没有表达式
case score >= 90:
    fmt.Println("A")
case score >= 80:
    fmt.Println("B")
default:
    fmt.Println("C")
}
```

## 4. goto, break, continue

-   `break`: 跳出循环或 switch。
-   `continue`: 跳过本次循环，进入下一次。
-   `goto`: 跳转到指定标签（不推荐使用，除非为了跳出深层嵌套循环）。

### 4.1 配合标签 (Label) 跳出多层循环

在 JavaScript 中，我们也可以用 label 来跳出多层循环。Go 也是一样的。

```go
Loop: // 定义标签
    for i := 0; i < 3; i++ {
        for j := 0; j < 3; j++ {
            if i == 1 && j == 1 {
                break Loop // 直接跳出最外层循环
            }
            fmt.Println(i, j)
        }
    }
```

## 5. 总结

Go 的流程控制非常克制：
1.  `if` 不需要括号，支持初始化语句。
2.  `for` 是唯一的循环，配合 `range` 非常强大。
3.  `switch` 默认自动 break，更安全。

掌握了这些，你已经可以写出复杂的逻辑控制代码了。下一篇文章，我们将进入 Go 语言的数据结构部分，首先是——数组。

---

**上一篇**：[9.Go 语言基础之运算符](./9.Go%20语言基础之运算符.md)
**下一篇预告**：[11.Go 语言基础之数组](./11.Go%20语言基础之数组.md)
