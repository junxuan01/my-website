---
title: "Rust 语言基础之函数"
description: "学习 Rust 函数的定义、参数、返回值，以及表达式和语句的区别。"
date: "2025-11-30"
seriesOrder: 9.5
---

# 10. Rust 语言基础之函数

## 引言

函数是任何编程语言的基础构建块。在 JavaScript 中，我们有多种定义函数的方式（function 声明、箭头函数、方法等）。在 Go 中，函数使用 `func` 关键字。

Rust 的函数语法与它们有相似之处，但也有一些独特的设计，特别是在**表达式 vs 语句**的区分上。

## 1. 定义函数

Rust 使用 `fn` 关键字定义函数，函数名使用 **snake_case** 风格（全小写，下划线分隔）。

```rust
fn main() {
    println!("Hello, world!");
    another_function();
}

fn another_function() {
    println!("Another function.");
}
```

**与 JS/Go 的对比：**

| 语言 | 定义方式 | 命名风格 |
| :--- | :--- | :--- |
| JavaScript | `function foo()` / `const foo = () => {}` | camelCase |
| Go | `func foo()` | camelCase (公开) / 小写 (私有) |
| Rust | `fn foo()` | snake_case |

## 2. 函数参数

Rust 要求在函数签名中显式声明**每个参数的类型**。

```rust
fn greet(name: &str, age: i32) {
    println!("Hello, {}! You are {} years old.", name, age);
}

fn main() {
    greet("Alice", 30);
}
```

**与 JS/Go 的对比：**

```javascript
// JavaScript (无类型声明)
function greet(name, age) {
    console.log(`Hello, ${name}! You are ${age} years old.`);
}

// TypeScript (类似 Rust)
function greet(name: string, age: number): void { ... }
```

```go
// Go
func greet(name string, age int) {
    fmt.Printf("Hello, %s! You are %d years old.\n", name, age)
}
```

Rust 的参数声明格式是 `name: Type`，与 TypeScript 相同，与 Go 相反（Go 是 `name Type`）。

## 3. 返回值

使用 `->` 指定返回值类型。

```rust
fn add(a: i32, b: i32) -> i32 {
    a + b // 注意：没有分号！这是一个表达式，它的值被返回
}

fn main() {
    let result = add(5, 3);
    println!("5 + 3 = {}", result);
}
```

**与 JS/Go 的对比：**

```javascript
// JavaScript
function add(a, b) {
    return a + b; // 必须用 return
}
```

```go
// Go
func add(a int, b int) int {
    return a + b // 必须用 return
}
```

**关键区别**：在 Rust 中，如果函数体最后一个**表达式**没有分号，它的值会自动作为返回值。你也可以显式使用 `return` 关键字提前返回。

## 4. 语句 (Statements) vs 表达式 (Expressions)

这是 Rust 一个非常重要的概念，与 JS/Go 有很大不同。

*   **语句 (Statement)**：执行某些操作但**不返回值**。以分号 `;` 结尾。
*   **表达式 (Expression)**：计算并**产生一个值**。没有分号。

```rust
fn main() {
    let x = 5; // 这是一个语句，绑定了一个值

    let y = {
        let x = 3;
        x + 1 // 表达式！注意没有分号。这个代码块的值是 4
    };

    println!("y = {}", y); // 输出 y = 4
}
```

**常见错误**：

```rust
fn add(a: i32, b: i32) -> i32 {
    a + b; // ❌ 错误！加了分号变成了语句，不再返回值
           // 函数期望返回 i32，但实际返回了 () (空元组)
}
```

## 5. 没有返回值的函数

如果函数不返回任何值，可以省略 `-> Type`，或者显式写 `-> ()`。`()` 是 Rust 中的**单元类型 (Unit Type)**，类似于 JS 的 `undefined` 或 Go 的无返回值。

```rust
fn print_hello() {
    println!("Hello!"); // 这是一个语句
}

// 等价于
fn print_hello() -> () {
    println!("Hello!");
}
```

## 6. 多返回值？

Go 支持多返回值，非常方便。Rust 没有直接的多返回值语法，但可以用**元组 (Tuple)** 实现相同效果：

```rust
fn swap(a: i32, b: i32) -> (i32, i32) {
    (b, a)
}

fn main() {
    let (x, y) = swap(1, 2);
    println!("x = {}, y = {}", x, y); // x = 2, y = 1
}
```

**Go 对比：**

```go
func swap(a, b int) (int, int) {
    return b, a
}
```

## 7. 总结

| 特性 | JavaScript | Go | Rust |
| :--- | :--- | :--- | :--- |
| **定义关键字** | `function` / `=>` | `func` | `fn` |
| **参数类型** | 无 (TS 有) | `name Type` | `name: Type` |
| **返回类型** | 无 (TS 有) | `func() Type` | `fn() -> Type` |
| **返回语法** | `return value` | `return value` | 表达式 (无分号) 或 `return` |
| **多返回值** | 不支持 (用数组/对象) | 原生支持 | 使用元组 |
| **无返回值类型** | `void` (TS) | (空) | `()` 或省略 |

掌握了函数，你就可以开始组织更复杂的 Rust 程序了。下一篇，我们将学习 Rust 的流程控制语句。

---

**上一篇**：[9.Rust 语言基础之运算符](./9.Rust%20语言基础之运算符.md)
**下一篇预告**：[10.Rust 语言基础之流程控制](./10.Rust%20语言基础之流程控制.md)
